<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Assignment 6 ‚Äì Design Thinking & TSP Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body { background: #eef5ff; font-family: 'Segoe UI', sans-serif; padding: 30px; }
    .container { background: white; padding: 40px; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
    h1, h2, h3 { color: #007bff; margin-top: 20px; }
    #gameCanvas { display: block; margin: 20px auto; border: 1px solid #ccc; }
    #info { margin: 15px auto; text-align: center; }
    .footer { text-align: center; margin-top: 40px; color: #6c757d; }
    .btn { margin-top: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Assignment 6: Design Thinking &amp; TSP Game</h1>
    <p><strong>Student:</strong> AKIB ABU SALEH MD<br><strong>ID:</strong> 2217655</p>

    <h2>Design Thinking Practice</h2>
    <h3>1. Empathize</h3>
    <p><strong>Users:</strong> Students/newcomers learning logistics through gameplay.</p>
    <ul>
      <li><strong>Needs:</strong> Simple, interactive, engaging route optimization tool.</li>
      <li><strong>Challenges:</strong> Difficult logistics concepts, lack of practice.</li>
      <li><strong>Success:</strong> Players understand route planning via gameplay.</li>
    </ul>

    <h3>2. Define</h3>
    <p><strong>Problem:</strong> Lack of intuitive tools to teach route optimization effectively.</p>

    <h3>3. Ideate</h3>
    <ul>
      <li>Courier robot theme with delivery points.</li>
      <li>Click-to-choose map approach using TSP logic.</li>
      <li>Score by total fuel/distance cost.</li>
    </ul>

    <h3>4. Prototype</h3>
    <p>Interactive webpage with clickable nodes, real-time routing map, total-distance calculation, and feedback if rules are violated.</p>

    <h3>5. Test</h3>
    <ul>
      <li>Tested by users for ease-of-use and engagement.</li>
      <li>Added error messages and a reset button based on feedback.</li>
    </ul>

    <h2>Game Design Document</h2>
    <p><strong>Title:</strong> Route Runner: The Courier Challenge</p>
    <p><strong>Objective:</strong> Visit all delivery points (A‚ÄìF) and return to base (WH) with the minimum distance.</p>
    <p><strong>Mechanics:</strong></p>
    <ul>
      <li><strong>Nodes:</strong> WH (base), A‚ÄìF.</li>
      <li><strong>Edges:</strong> Straight-line distance between nodes.</li>
      <li><strong>Validation:</strong> Each node exactly once, finish at WH.</li>
      <li><strong>Scoring:</strong> Lower total = better.</li>
    </ul>
    <p><strong>Theme:</strong> Courier robot delivering parcels to each point.</p>

    <h2>TSP Game Prototype</h2>
    <canvas id="gameCanvas" width="600" height="400"></canvas>
    <div id="info">
      <p>Click nodes in sequence to build your route.</p>
      <button id="resetBtn" class="btn btn-outline-primary">Reset Route</button>
      <p id="message"></p>
      <p><strong>Total Distance:</strong> <span id="distance">0</span></p>
    </div>

    <div class="footer">
      &copy; 2025 AKIB ABU SALEH MD | Student ID: 2217655
    </div>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const message = document.getElementById('message');
    const distEl = document.getElementById('distance');
    const resetBtn = document.getElementById('resetBtn');

    const nodes = {
      WH: { x: 80,  y: 200 },
      A:  { x: 200, y: 80 },
      B:  { x: 400, y: 60 },
      C:  { x: 520, y: 200 },
      D:  { x: 450, y: 320 },
      E:  { x: 300, y: 300 },
      F:  { x: 150, y: 300 }
    };
    const order = [];
    let totalDist = 0;

    function drawNodes() {
      ctx.fillStyle = '#007bff';
      ctx.font = 'bold 14px sans-serif';
      Object.entries(nodes).forEach(([k,v]) => {
        ctx.beginPath();
        ctx.arc(v.x, v.y, 10, 0, 2 * Math.PI);
        ctx.fill();
        ctx.fillText(k, v.x - 8, v.y - 16);
      });
    }

    function drawPath() {
      if (order.length < 2) return;
      ctx.strokeStyle = 'red';
      ctx.lineWidth = 2;
      ctx.beginPath();
      const p0 = nodes[order[0]];
      ctx.moveTo(p0.x, p0.y);
      for (let i = 1; i < order.length; i++) {
        const p = nodes[order[i]];
        ctx.lineTo(p.x, p.y);
      }
      ctx.stroke();
    }

    function resetGame() {
      order.length = 0;
      totalDist = 0;
      distEl.textContent = totalDist;
      message.textContent = '';
      ctx.clearRect(0,0,canvas.width, canvas.height);
      drawNodes();
    };

    resetBtn.addEventListener('click', resetGame);

    canvas.addEventListener('click', (e) => {
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      for (let key in nodes) {
        const n = nodes[key];
        if (Math.hypot(x - n.x, y - n.y) < 10) {
          if (order.includes(key)) {
            message.textContent = `üîÅ You already selected ${key}`;
            return;
          }
          order.push(key);
          message.textContent = `Selected ${key}`;
          if (order.length > 1) {
            const p0 = nodes[order[order.length - 2]];
            totalDist += Math.hypot(n.x - p0.x, n.y - p0.y);
            distEl.textContent = totalDist.toFixed(1);
          }
          ctx.clearRect(0,0,canvas.width, canvas.height);
          drawNodes();
          drawPath();

          if (order.length === Object.keys(nodes).length) {
            if (order[0] !== 'WH') {
              message.textContent = '‚ö†Ô∏è You must start at WH';
            } else {
              // close route
              const plast = nodes[order[order.length - 1]];
              const pstart = nodes['WH'];
              totalDist += Math.hypot(plast.x - pstart.x, plast.y - pstart.y);
              distEl.textContent = totalDist.toFixed(1);
              message.textContent = `üéâ Route complete! Total dist = ${totalDist.toFixed(1)}`;
            }
          }
          return;
        }
      }
    });

    drawNodes();
  </script>
</body>
</html>
